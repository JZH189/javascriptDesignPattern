<script>
  //组合模式是一种结构型设计模式，它将对象组合成树状结构以表示"部分-整体"的层次结构。
  class Component {
    constructor(name) {
      this.name = name;
      this.children = [];
    }

    add(component) {
      this.children.push(component);
    }

    remove(component) {
      this.children = this.children.filter(child => child !== component);
    }

    operation() {
      console.log(`Component ${this.name}: Performing operation.`);
      this.children.forEach(child => child.operation());
    }
  }

  class Leaf extends Component {
    operation() {
      console.log(`Leaf ${this.name}: Performing operation.`);
    }
  }

  // 创建组合结构
  const root = new Component("root");
  const branch1 = new Component("branch1");
  const branch2 = new Component("branch2");
  const leaf1 = new Leaf("leaf1");
  const leaf2 = new Leaf("leaf2");
  const leaf3 = new Leaf("leaf3");

  root.add(branch1);
  root.add(branch2);
  branch1.add(leaf1);
  branch2.add(leaf2);
  branch2.add(leaf3);

  // 执行操作
  root.operation();


/**
 * 组合模式的优点在于它能够以统一的方式处理单个对象和组合对象，客户端无需关心具体对象的类型。
 * 它提供了一种递归遍历结构的方式，使得对整个层次结构的操作更加简洁和灵活。
 * 此外，组合模式还支持动态添加和删除组件，使得结构的管理更加方便。
*/
</script>